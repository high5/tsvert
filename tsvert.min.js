/**
 * tsvert - a tsv converter
 * Copyright (c) high5. (MIT Licensed)
 * https://github.com/high5/tsvert
 */
(function(){function e(e){for(var n,t,r=1;r<arguments.length;r++){n=arguments[r];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}function n(e){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};return e.replace(/[&<>"]/g,function(e){return n[e]})}function t(r,u){var h=e({},t.defaults,h||{});""!=h.header&&(r=h.header+"\n"+r);for(var c=r.replace(/\r/g,"").split("\n"),g=[],f="",p=c[0].split("	"),N=1;N<c.length;N++){for(var b={},d=c[N].split("	"),m=0;m<p.length;m++)0==h.html?b[p[m]]=d[m]:b[n(p[m])]=n(d[m]);g.push(b)}switch(u){case"sql":f=l(g,h);break;case"json":f=a(g,h);break;case"php":f=s(g,h);break;case"python":f=i(g,h);break;case"ruby":f=o(g,h)}return f}function r(e,n){var t=isNaN(n)?"'":"",r="";return"string"==typeof n&&0==n.length?t="'":"const"==e||"constant"==e?t="":"str"==e||"string"==e?t="'":("flex"==e||"flexible"==e)&&(t=isNaN(n)?"'":"",0==n.length&&(t="'"),""!=t&&(r=n.toLowerCase(),("null"==r||"true"==r||"false"==r)&&(t=""))),t}function l(e,n){for(var t="",l=n.html===!0?"<br>":"\n",a=""===n.sqlTableName?"table":n.sqlTableName,s=0;s<e.length;s++){var i=e[s],o="",u="",h=0;t+=n.sqlBulkInsert===!0&&0!==s?",":"INSERT INTO "+a;for(var c in i){var g=c,f=i[c],p="",N="",b=c.split(":");2==b.length&&2!=c.split("\\:").length&&(g=b[0],p=b[1].toLowerCase(),("num"==p||"number"==p)&&(f=isNaN(f)?0:parseFloat(f),isNaN(f)&&(f=0)),"const"!=p&&"constant"!=p||0!=f.length||(f="UNDEFINED")),N=r(p,f),2==c.split("\\:").length&&(g=g.replace("\\","")),h++,o+=g,u+=N+f+N,h!=Object.keys(i).length&&(o+=", ",u+=", ")}t+="("+o+") VALUES("+u+")",n.sqlBulkInsert===!0?s==e.length-1&&(t+=";"):t+=";",s!=e.length-1&&(t+=l)}return t}function a(e,n){var t="",l=n.html===!0?"<br>":"\n";t+="["+l;for(var a=0;a<e.length;a++){var s=e[a],i="",o=0;t+=n.useRowNumberKey===!0?'  "'+(a+1)+'": {':"  {",n.indent===!0&&(i+=l);for(var u in s){var h=u,c=s[u],g="",f="",p=u.split(":");2==p.length&&2!=u.split("\\:").length&&(h=p[0],g=p[1].toLowerCase(),("num"==g||"number"==g)&&(c=isNaN(c)?0:parseFloat(c),isNaN(c)&&(c=0)),"const"!=g&&"constant"!=g||0!=c.length||(c="UNDEFINED")),f=r(g,c),""!=f&&(f='"'),2==u.split("\\:").length&&(h=h.replace("\\","")),o++,n.indent===!0&&(i+="    "),i+='"'+h+'": '+f+c+f,o!=Object.keys(s).length&&(i+=1!=n.indent?", ":","),n.indent===!0&&(i+=l)}t+=n.indent===!0?i+"  }":i+"}",a!=e.length-1&&(t+=","),t+=l}return t+="];"}function s(e,n){var t="",l=n.html===!0?"<br>":"\n";t+="array("+l;for(var a=0;a<e.length;a++){var s=e[a],i="",o=0;t+=n.useRowNumberKey===!0?"  "+(a+1)+" => array(":"  array(",n.indent===!0&&(i+=l);for(var u in s){var h=u,c=s[u],g="",f="",p=u.split(":");2==p.length&&2!=u.split("\\:").length&&(h=p[0],g=p[1].toLowerCase(),("num"==g||"number"==g)&&(c=isNaN(c)?0:parseFloat(c),isNaN(c)&&(c=0)),"const"!=g&&"constant"!=g||0!=c.length||(c="UNDEFINED")),f=r(g,c),2==u.split("\\:").length&&(h=h.replace("\\","")),o++,n.indent===!0&&(i+="    "),i+="'"+h+"' => "+f+c+f,o!=Object.keys(s).length&&(i+=1!=n.indent?", ":","),n.indent===!0&&(i+=l)}t+=n.indent===!0?i+"  )":i+")",a!=e.length-1&&(t+=","),t+=l}return t+=");"}function i(e,n){var t="",l=n.html===!0?"<br>":"\n";t+=n.useRowNumberKey===!0?"{"+l:"["+l;for(var a=0;a<e.length;a++){var s=e[a],i="",o=0;t+=n.useRowNumberKey===!0?"  "+(a+1)+": {":"  {",n.indent===!0&&(i+=l);for(var u in s){var h=u,c=s[u],g="",f="",p=u.split(":");2==p.length&&2!=u.split("\\:").length&&(h=p[0],g=p[1].toLowerCase(),("num"==g||"number"==g)&&(c=isNaN(c)?0:parseFloat(c),isNaN(c)&&(c=0)),"const"!=g&&"constant"!=g||0!=c.length||(c="UNDEFINED")),f=r(g,c),""!=f&&(f='"'),2==u.split("\\:").length&&(h=h.replace("\\","")),o++,n.indent===!0&&(i+="    ");var N='"'+h+'"';i+=N+": "+f+c+f,o!=Object.keys(s).length&&(i+=1!=n.indent?", ":","),n.indent===!0&&(i+=l)}t+=n.indent===!0?i+"  }":i+"}",a!=e.length-1&&(t+=","),t+=l}return t+=n.useRowNumberKey===!0?"}":"]"}function o(e,n){var t="",l=n.html===!0?"<br>":"\n";t+=n.useRowNumberKey===!0?"{"+l:"["+l;for(var a=0;a<e.length;a++){var s=e[a],i="",o=0;t+=n.useRowNumberKey===!0?"  "+(a+1)+" => {":"  {",n.indent===!0&&(i+=l);for(var u in s){var h=u,c=s[u],g="",f="",p=u.split(":");2==p.length&&2!=u.split("\\:").length&&(h=p[0],g=p[1].toLowerCase(),("num"==g||"number"==g)&&(c=isNaN(c)?0:parseFloat(c),isNaN(c)&&(c=0)),"const"!=g&&"constant"!=g||0!=c.length||(c="UNDEFINED")),f=r(g,c),""!=f&&(f='"'),2==u.split("\\:").length&&(h=h.replace("\\","")),o++,n.indent===!0&&(i+="    ");var N=n.rubySymbolKey?":"+h:'"'+h+'"';i+=N+" => "+f+c+f,o!=Object.keys(s).length&&(i+=1!=n.indent?", ":","),n.indent===!0&&(i+=l)}t+=n.indent===!0?i+"  }":i+"}",a!=e.length-1&&(t+=","),t+=l}return t+=n.useRowNumberKey===!0?"}":"]"}t.options=t.setOptions=function(n){return 0==Object.keys(t.initials)&&e(t.initials,t.defaults),e(t.defaults,n),t},t.initializeOptions=function(){return e(t.defaults,t.initials),t},t.initials={},t.defaults={html:!1,indent:!1,sqlBulkInsert:!1,sqlTableName:"",rubySymbolKey:!0,useRowNumberKey:!1,header:""},"undefined"!=typeof module&&"object"==typeof exports?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):this.tsvert=t}).call(function(){return this||("undefined"!=typeof window?window:global)}());